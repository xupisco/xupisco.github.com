<!DOCTYPE html>
<html lang="">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">
<meta name="author" content="xupisco">
<meta name="description" content="Tutorial FlappyBird - Entendendo a estrutura do projeto">


<meta property="og:title" content="02 - Entendendo a estrutura do projeto" />
<meta property="og:description" content="Tutorial FlappyBird - Entendendo a estrutura do projeto" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://xupisco.net/flappybird-tutorial/02_understanding-the-skeleton/" />

	<meta property="og:image" content="http://xupisco.github.io/img/og/flappy-bird-cover.jpg" />



<meta property="og:updated_time" content="2017-06-27 10:32:20 -0300 -03"/>













<meta property="article:author" content="https://www.facebook.com/xupisco" />

<meta property="article:publisher" content="https://www.facebook.com/xupisco" />

<meta property="article:published_time" content="2017-06-27 10:32:20 -0300 -03" />

<meta property="article:modified_time" content="2017-06-27 10:32:20 -0300 -03" />
<meta property="article:section" content="flappybird-tutorial" />

	<meta property="article:tag" content="tutorial" />

	<meta property="article:tag" content="corona" />



<meta property="fb:admins" content="830831574" />


<meta itemprop="name" content="02 - Entendendo a estrutura do projeto">
<meta itemprop="description" content="Tutorial FlappyBird - Entendendo a estrutura do projeto">



	<meta itemprop="image" content="http://xupisco.github.io/img/og/flappy-bird-cover.jpg">



<meta itemprop="keywords" content="ad,chrome,corona,dev,extension,gamedev,godot,lua,python,tips,tutorial,vscode," />


<meta itemprop="wordCount" content="907">



	<meta name="twitter:card" content="summary_large_image"/>
	<meta name="twitter:image:src" content="http://xupisco.github.io/img/og/flappy-bird-cover.jpg"/>



<meta name="twitter:title" content="02 - Entendendo a estrutura do projeto"/>
<meta name="twitter:description" content="Tutorial FlappyBird - Entendendo a estrutura do projeto"/>
<meta name="twitter:site" content="@xupisco"/>
<meta name="twitter:domain" content="xupisco.net"/>

	
	




<title>


     02 - Entendendo a estrutura do projeto 

</title>
<link rel="canonical" href="https://xupisco.net/flappybird-tutorial/02_understanding-the-skeleton/">







<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/lua.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>




<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Ubuntu+Mono:400,400i,700,700i|Raleway:500">



    
    <link rel="stylesheet" href="/css/reset.css?t=2021-02-11%2020%3a43%3a21.3512804%20-0300%20-03%20m%3d%2b0.130830501">
    <link rel="stylesheet" href="/css/pygments.css?t=2021-02-11%2020%3a43%3a21.3512804%20-0300%20-03%20m%3d%2b0.130830501">
    <link rel="stylesheet" href="/css/main.css?t=2021-02-11%2020%3a43%3a21.3512804%20-0300%20-03%20m%3d%2b0.130830501">
    
        <link rel="stylesheet" href="/css/customize.css?t=2021-02-11%2020%3a43%3a21.3512804%20-0300%20-03%20m%3d%2b0.130830501">
    




<link rel="shortcut icon"

    href="//img/zen.png"

>

</head>


<body lang="pt-br">

<section class="header">
    <div class="container">
        <div class="content">
            
                
                
                
                
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                
                <a href="/"><img class="avatar" src="//img/zen.png" srcset="https://xupisco.net/img/zen.png 1x"></a>
            
            <a href="/"><div class="name">xupisco</div></a>
            
              <h3 class="self-intro">// insert clever quote here</h3>
            
            <nav>
                <ul>
                    
                        <li class="nav-blog"><a href="https://xupisco.net/"><span>Blog</span></a>&nbsp;&nbsp;&nbsp;| </li>
                    
                        <li class="nav-flappybird-tutorial"><a href="https://xupisco.net/flappybird-tutorial/"><span>FlappyBird Tutorial</span></a></li>
                    
                </ul>
            </nav>
        </div>
    </div>
</section>

<section class="icons">
    <div class="container">
        <div class="content">

        
            <a href="//github.com/xupisco" target="_blank" rel="noopener"><img class="icon" src="/img/github.svg" alt="github" /></a>
        

        
            <a href="//twitter.com/xupisco" target="_blank" rel="noopener"><img class="icon" src="/img/twitter.svg" alt="twitter" /></a>
        

        

        

        

        

        
            <a href="mailto:dev@xupisco.net"><img class="icon" src="/img/email.svg" alt="email" /></a>
        

        
        </div>
    </div>
</section>


<section class="main post non-narrow zero-top-spacing">
    <div class="container">
        <div class="content">
            <div class="front-matter">
                <span class="tags">
                
                    <a href="/tags/tutorial">#tutorial</a>
                
                    <a href="/tags/corona">#corona</a>
                
                </span>
                <div class="title-container">
                    <div class="page-heading">

    02 - Entendendo a estrutura do projeto

</div>

                    <div class="initials"><a href="https://xupisco.net"></a></div>
                </div>
                <div class="meta">
                    
                    <div class="date" title='Tue Jun 27 2017 10:32:20 -03'>27/06/2017</div>
                    
                    
		            <div class="reading-time"><div class="middot"></div>Uns 5 minutos de leitura</div>
                    
                </div>
            </div>
                <div class="markdown">
                <p>Hello again&hellip; agora que você já <a href="https://xupisco.net/flappybird-tutorial/01_hello-world/">instalou o CoronaSDK e baixou o esqueleto do projeto</a>, podemos começar a colocar a mão na massa e dar vida ao nosso game (clone). Por enquanto temos apenas uma tela preta, parece ruim, mas já está funcionando e com todas as configurações necessárias para continuarmos o desenvolvimento.</p>
<p>Antes de baixar os assets e colocar nosso background, vou explicar como o CoronaSDK funciona e quais configurações estão nos arquivos iniciais.</p>
<h2 id="rodando-o-game-">Rodando o game</h2>
<p>Quando o Simulador inicia o projeto ele &ldquo;lê&rdquo;, na sequência, os seguintes arquivos fundamentais para qualquer projeto em Corona:</p>
<ol>
<li>config.lua</li>
<li>main.lua</li>
</ol>
<blockquote>
<p>Se vc for esperto, vai perceber que na nossa raiz também existe um arquivo &ldquo;build.settings&rdquo;, ele contém instruções sobre como compilar o projeto para determinado OS, irrelevante por enquanto.</p>
</blockquote>
<p>Vamos começar com o <strong>config.lua</strong>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">application <span style="color:#f92672">=</span> {
	content <span style="color:#f92672">=</span> {
		width <span style="color:#f92672">=</span> <span style="color:#ae81ff">144</span>,
		height <span style="color:#f92672">=</span> <span style="color:#ae81ff">256</span>,
		scale <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;zoomEven&#34;</span>,
		fps <span style="color:#f92672">=</span> <span style="color:#ae81ff">60</span>
	},
}
</code></pre></div><p>Esse bloco diz para o engine como é nosso aplicativo (ou game), passando as instruções explicadas abaixo:</p>
<ul>
<li><strong>width</strong>: Largura</li>
<li><strong>height</strong>: Altura</li>
<li><strong>scale</strong>: Como redimensionar nosso game *</li>
<li><strong>fps</strong>: Frames Por Segundo</li>
</ul>
<blockquote>
<p>* Hoje em dia existem diversos tamanhos e formatos de telas nos devices (celulares), por isso temos que nos preocupar em como o game vai se comportar em cada um deles. Mais detalhes no decorrer deste tutorial&hellip; para os apressados, as opções são: &ldquo;letterbox&rdquo;, &ldquo;zoomEven&rdquo;, &ldquo;adaptive&rdquo; e &ldquo;zoomStretch&rdquo;. Leia sobre elas <a href="https://docs.coronalabs.com/guide/basics/configSettings/#scale">aqui</a>.</p>
</blockquote>
<p>Se você trabalha ou já trabalhou com desenvolvimento web, vai perceber que o arquivo &ldquo;config.lua&rdquo; parece um <strong>json</strong>, mas na verdade é uma <a href="https://www.lua.org/pil/2.5.html">tabela</a> (em Lua), vale a pena entender melhor como elas funcionam, clique no link para ler mais.</p>
<hr>
<p>Agora o <strong>main.lua</strong>:</p>
<blockquote>
<p>Esse é o principal cara do seu game, tudo começa aqui, por isso é importante entender como utilizá-lo de maneira eficiente. Nosso esqueleto está bem simples, vamos lá.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua"><span style="color:#75715e">-- No antialias (pixelart games)</span>
display.setDefault(<span style="color:#e6db74">&#39;magTextureFilter&#39;</span>, <span style="color:#e6db74">&#39;nearest&#39;</span>)
display.setDefault(<span style="color:#e6db74">&#39;minTextureFilter&#39;</span>, <span style="color:#e6db74">&#39;nearest&#39;</span>)

<span style="color:#66d9ef">local</span> composer <span style="color:#f92672">=</span> require(<span style="color:#e6db74">&#39;composer&#39;</span>)

composer.recycleOnSceneChange <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>
composer.effectList.fade.from.transition <span style="color:#f92672">=</span> easing.outQuad
composer.effectList.fade.to.transition <span style="color:#f92672">=</span> easing.outQuad
<span style="color:#75715e">-- composer.gotoScene(&#39;scenes.menu&#39;)</span>
</code></pre></div><p><strong>#tip:</strong> Se ainda não percebeu, é com <code>--</code> que criamos comentários em Lua.</p>
<p>Agora calma, vamos por partes:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua"><span style="color:#75715e">-- No antialias (pixelart games)</span>
display.setDefault(<span style="color:#e6db74">&#39;magTextureFilter&#39;</span>, <span style="color:#e6db74">&#39;nearest&#39;</span>)
display.setDefault(<span style="color:#e6db74">&#39;minTextureFilter&#39;</span>, <span style="color:#e6db74">&#39;nearest&#39;</span>)
</code></pre></div><p>Essas duas primeiras linhas, dizemos ao compilador como ele deve redimensionar nossas imagens, como nosso game é em &ldquo;pixel-art&rdquo;, a melhor opção é &ldquo;nearest&rdquo;, vai por mim. Na sequência&hellip;</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua"><span style="color:#66d9ef">local</span> composer <span style="color:#f92672">=</span> require(<span style="color:#e6db74">&#39;composer&#39;</span>)

composer.recycleOnSceneChange <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>
composer.effectList.fade.from.transition <span style="color:#f92672">=</span> easing.outQuad
composer.effectList.fade.to.transition <span style="color:#f92672">=</span> easing.outQuad
</code></pre></div><p>O <strong>composer</strong> é responsável por cuidar das nossas &ldquo;cenas&rdquo;. Todo game possui pelo menos uma. Mas o que é diabos é uma cena? Você pergunta, explico: É o que está na tela&hellip; WHAT?</p>
<p>Relax, olha só como é fácil&hellip; assim vc vai entender melhor.<br>
Algumas cenas &ldquo;comuns&rdquo; são:</p>
<ul>
<li>Menu</li>
<li>Configurações</li>
<li>Fases:
<ul>
<li>Tutorial</li>
<li>Fase 01 &hellip;. N</li>
</ul>
</li>
<li>Game Over</li>
<li>Placar</li>
</ul>
<p>Sacou? Conforme a gente for criando o game (e as cenas) tudo fica mais claro&hellip; não se preocupe. Vamo-que-vamo, vai ficar legal!</p>
<h2 id="baixando-os-assets-">Baixando os Assets</h2>
<p>Antes de tudo, um ponto <strong>muito importante</strong> aqui. NÃO use imagens em seus jogos sem que tenha o direito, de preferência por escrito, de quem as criou. Pirataria é crime e uso ilegal de imagens também, existe um tal de &ldquo;<a href="https://pt.wikipedia.org/wiki/Direito_autoral">Direito Autoral</a>&rdquo; que deve ser respeitado.</p>
<p>As imagens e sons do <strong>FlappyBird</strong> são de propriedade do <strong>Dong Nguyen</strong>, como este tutorial é puramente educacional e sem fins lucrativos, vamos utilizá-las. Pronto, agora&hellip; <a href="https://github.com/xupisco/CoronaSDK-FlappyBird/raw/master/FlappyBird%20Assets.zip">baixe aqui os assets do Flappy Bird</a> e coloque no diretório &ldquo;assets&rdquo; do seu projeto, ficando:</p>
<table>
<thead>
<tr>
<th align="left"><strong>Pasta</strong></th>
<th align="left"><strong>Tipo de arquivo</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">./assets/SFX</td>
<td align="left">Efeitos sonoros (.mp3)</td>
</tr>
<tr>
<td align="left">./assets/sprites</td>
<td align="left">Imagens</td>
</tr>
</tbody>
</table>
<p>Pronto, tudo no lugar&hellip; vamos fazer algumas coisa aparecer logo na tela antes que vc desista de continuar.</p>
<h2 id="incluindo-nosso-background-">Incluindo nosso background</h2>
<p>Dentro da pasta &ldquo;scenes&rdquo; já deixei um arquivo chamado &ldquo;<strong>_template.lua</strong>&quot;, ele servirá como base para todas as nossas cenas. Para começar, faça uma cópia do &ldquo;_template.lua&rdquo; e renomeie para &ldquo;<strong>game.lua</strong>&rdquo; (ainda dentro de scenes).</p>
<p>Dentro do arquivo que está na raiz &ldquo;main.lua&rdquo;, remova o comentário da linha &ldquo;&ndash;composer.gotoScene(&lsquo;scenes.menu&rsquo;)&rdquo; e altere o que está dentro do parenteses para &lsquo;scenes.game&rsquo;, ficando:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">composer.gotoScene(<span style="color:#e6db74">&#39;scenes.game&#39;</span>)
</code></pre></div><p>Se ainda está com o Simulador aberto, ele deve atualizar sozinho&hellip; se não, abra o simulador o projeto, a tela ainda está preta. Vamos atualizar agora o arquivo &ldquo;scenes/game.lua&rdquo;. Abra-o.</p>
<p>Vamos alterar a função &ldquo;scene:create(event)&rdquo; deixando dessa maneira:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua"><span style="color:#75715e">-- create()</span>
<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">scene</span>:<span style="color:#a6e22e">create</span>(event)
    <span style="color:#66d9ef">local</span> group <span style="color:#f92672">=</span> self.view
	<span style="color:#66d9ef">local</span> background <span style="color:#f92672">=</span> display.newImageRect(<span style="color:#e6db74">&#34;assets/sprites/background_day.png&#34;</span>, <span style="color:#ae81ff">144</span>, <span style="color:#ae81ff">256</span>)
	background.anchorX, background.anchorY <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>
    background.x, background.y <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>
	group:insert(background)
<span style="color:#66d9ef">end</span>
</code></pre></div><p>Apareceu uma imagem no simulador? Boa&hellip; vou explicar o que as novas linhas fazem, uma por uma.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua"><span style="color:#66d9ef">local</span> background <span style="color:#f92672">=</span> display.newImageRect(<span style="color:#e6db74">&#34;assets/sprites/background_day.png&#34;</span>, <span style="color:#ae81ff">144</span>, <span style="color:#ae81ff">256</span>)
</code></pre></div><p>Aqui criamos uma variável &ldquo;local&rdquo; (dentro do escopo) do tipo &ldquo;display.newImageRect&rdquo;, que é como o Corona exibe sprites na tela. Os parâmetros são:</p>
<ol>
<li>Caminho do arquivo</li>
<li>Largura da imagem</li>
<li>Altura da imagem</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">background.anchorX, background.anchorY <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>
background.x, background.y <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>
</code></pre></div><p>Agora, mudamos o &ldquo;pivot&rdquo; da imagem para 0, 0&hellip; ou seja, no topo superior esquerdo e posicionamos a imagem na tela, também em 0, 0. Mais pra frente vc vai entender o que isso faz, vem comigo.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua">group:insert(background)
</code></pre></div><p>Para finalizar, incluímos nosso background no grupo &ldquo;group&rdquo;. Todos os objetos do tipo &ldquo;display&rdquo; devem estar dentro deste grupo para que o composer saiba como tratar os elementos quando mudarmos de cena. Complicado? Nem é&hellip; vc chega lá!</p>
<hr>
<p>É isso ai, agora já temos alguma coisa rodando e nosso game &ldquo;começa&rdquo; a existir. No próximo post vamos incluir o chão animado (dando ilusão de estar passando), além do pássaro e suas animações básicas!</p>
<p>See you there&hellip;<br>
Hugs!</p>

                <br>
		        <p><a href="/flappybird-tutorial">&lt;&lt; Voltar ao índice</a></p>
            </div>
            <br>
            <div class="disqus">
                <div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'xupisco';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
            </div>
            <br />
            <div class="related">
                

<hr />
<h3>Outros</h3>
<ul>
	
	<li><a href="/flappybird-tutorial/01_hello-world/">01 - Hello World</a>                 <span class="tags">
        
            <a href="/tags/tutorial">#tutorial</a>
        
            <a href="/tags/corona">#corona</a>
        
        </span></li>
	
	<li><a href="/post/flappybird-clone-usando-coronasdk/">Flappybird Clone usando CoronaSDK</a>                 <span class="tags">
        
            <a href="/tags/corona">#corona</a>
        
            <a href="/tags/lua">#lua</a>
        
            <a href="/tags/tutorial">#tutorial</a>
        
        </span></li>
	
</ul>

            </div>
        </div>
    </div>
</section>



<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-8395201-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/highlight.min.js"></script>
  

  <script type="text/javascript">
    hljs.initHighlightingOnLoad();
  </script>




</body>
</html>

